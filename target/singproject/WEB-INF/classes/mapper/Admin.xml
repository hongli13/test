<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.xmkeshe.dao.IAdminDAO">
    <insert id="doCreate" parameterType="Admin">
        INSERT INTO admin(aid,password,name,flag,locked ,regdate)
        VALUES (#{aid},#{password},#{name},#{flag},#{locked} ,#{regdate})
    </insert>
    <insert id="doCreateAdminAndRole" parameterType="java.util.Map">
        INSERT INTO admin_role(rid,aid) VALUES (#{rid},#{aid})
    </insert>
    <update id="doUpdateByPassword" parameterType="java.util.Map">
        UPDATE admin SET password=#{password} WHERE aid=#{aid}
    </update>
    <select id="findById" parameterType="string" resultType="Admin">
        SELECT aid,password,name,flag,locked ,regdate FROM admin WHERE aid=#{aid} AND locked=0
    </select>

    <select id="findAllBySplit" parameterType="java.util.Map" resultType="Admin">
       SELECT aid,password,name,flag,locked ,regdate FROM admin LIMIT #{currentPage},#{lineSize}
    </select>

    <select id="getAllCount" resultType="integer">
       SELECT count(aid) FROM admin
    </select>
</mapper>  